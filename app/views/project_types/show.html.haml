%h1
  %span Project type:
  = @project_type.name

%p
  - unless @project_type.description.nil? or @project_type.description.empty?
    = @project_type.description
  - else
    This project type has no description. Did you know that a kitten dies every time someone creates a project without a proper description? Now you do.

= form_for @project_type, html: { class: "inline" } do |p|
  = p.text_field :default_rate, :placeholder => @project_type.default_rate || "none", :size => 4
  = p.submit "Set default rate"

- unless @project_type.tasks.empty?
  %table
    %thead
      %td Task
      %td
    %tbody
      - @project_type.tasks.each do |t|
        %tr
          %td= t.name
          %td
            = link_to content_tag(:i, nil, class: "icon-edit"), edit_project_type_task_path(@project_type, t)
            = link_to content_tag(:i, nil, class: "icon-cancel"), project_type_task_path(@project_type, t), :method => :delete, class: "delete-icon"
- else
  %p This project type has no tasks. You should create some, tasks are awesome. Just press the leftest one of the nifty icons below.

%p.project-icons
  = link_to content_tag(:i, nil, class: "icon-doc-new"), new_project_type_task_path(@project_type), title: "Create a new task for this project"
  = link_to content_tag(:i, nil, class: "icon-edit"), edit_project_type_path, title: "Edit project type title or description"
  - unless @project_type.public == true
    = link_to content_tag(:i, nil, class: "icon-share"), project_type_path(@project_type, project_type: { public: true }), method: :patch, data: { confirm: "Are you sure you want to make this template public?" } , title: "Make this template public"
  - else
    = link_to content_tag(:i, nil, class: "icon-share"), project_type_path(@project_type, project_type: { public: false }), method: :patch, data: { confirm: "Are you sure you want to make this template private?" } , class: "delete-icon", title: "Make this template private"
  = link_to content_tag(:i, nil, class: "icon-trash"), @project_type, method: :delete, data: { confirm: "Wait, really? This project type is awesome. Sure you want to delete?" }, class: "delete-icon", title: "Delete this project type"